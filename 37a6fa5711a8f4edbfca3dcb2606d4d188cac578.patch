From 37a6fa5711a8f4edbfca3dcb2606d4d188cac578 Mon Sep 17 00:00:00 2001
From: Siteshwar Vashisht <siteshwar@gmail.com>
Date: Fri, 13 Jun 2014 00:23:00 +0530
Subject: [PATCH] Make cutils and logcat aware of the new log location

---
 include/log/logger.h | 8 ++++----
 init/devices.c       | 2 +-
 logcat/logcat.cpp    | 2 +-
 3 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/include/log/logger.h b/include/log/logger.h
index 04f3fb0..6a3f1dc 100644
--- a/include/log/logger.h
+++ b/include/log/logger.h
@@ -43,10 +43,10 @@ struct logger_entry_v2 {
     char        msg[0];    /* the entry's payload */
 };
 
-#define LOGGER_LOG_MAIN		"log/main"
-#define LOGGER_LOG_RADIO	"log/radio"
-#define LOGGER_LOG_EVENTS	"log/events"
-#define LOGGER_LOG_SYSTEM	"log/system"
+#define LOGGER_LOG_MAIN		"alog/main"
+#define LOGGER_LOG_RADIO	"alog/radio"
+#define LOGGER_LOG_EVENTS	"alog/events"
+#define LOGGER_LOG_SYSTEM	"alog/system"
 
 /*
  * The maximum size of the log entry payload that can be
diff --git a/init/devices.c b/init/devices.c
index 4badd20..780d7b0 100644
--- a/init/devices.c
+++ b/init/devices.c
@@ -668,7 +668,7 @@ static void handle_generic_device_event(struct uevent *uevent)
          make_dir(base, 0755);
      } else if(!strncmp(uevent->subsystem, "misc", 4) &&
                  !strncmp(name, "log_", 4)) {
-         base = "/dev/log/";
+         base = "/dev/alog/";
          make_dir(base, 0755);
          name += 4;
      } else
diff --git a/logcat/logcat.cpp b/logcat/logcat.cpp
index 9c18585..7adb997 100644
--- a/logcat/logcat.cpp
+++ b/logcat/logcat.cpp
@@ -30,7 +30,7 @@ static int g_tail_lines = 0;
 /* logd prefixes records with a length field */
 #define RECORD_LENGTH_FIELD_SIZE_BYTES sizeof(uint32_t)
 
-#define LOG_FILE_DIR    "/dev/log/"
+#define LOG_FILE_DIR    "/dev/alog/"
 
 struct queued_entry_t {
     union {
